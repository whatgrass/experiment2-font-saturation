<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂØ¶È?‰∫åÔ?Â≠óÂ?È£ΩÂ?Ê∏¨È?</title>
    
    <!-- jsPsych CSS (‰ΩøÁî® CDNÔºåÁõ∏Â∞çË∑ØÂæëÂú® GitHub Pages ?ÉÊ??èÈ?) -->
    <link href="https://cdn.jsdelivr.net/npm/jspsych@7.3.3/css/jspsych.css" rel="stylesheet" type="text/css"/>
    
    <!-- ÂØ¶È?Â∞àÂ±¨ CSS -->
    <link href="./css/experiment2.css" rel="stylesheet" type="text/css"/>
</head>
<body>
    <!-- ?ùÂ?ËºâÂÖ•?´Èù¢ - È°ØÁ§∫?ãÂ??âÈ? -->
    <div id="start-screen" style="text-align: center; padding: 100px 20px;">
        <h1>ÂØ¶È?‰∫åÔ?Â≠óÂ?È£ΩÂ?Ê∏¨È?</h1>
        <p style="font-size: 18px; margin: 30px 0;">Ë´ãÊ??ôÂ•ΩÂæåÔ?ÈªûÊ?‰∏ãÊñπ?âÈ??ãÂ?ÂØ¶È?</p>
        <button id="start-button" class="start-btn" type="button">?ãÂ?ÂØ¶È?</button>
        <div id="loading" style="display: none; margin-top: 30px;">
            <p>Ê≠?ú®ËºâÂÖ•ÂØ¶È?...</p>
            <div class="spinner"></div>
        </div>
    </div>
    
    <!-- jsPsych ÂØ¶È?ÂÆπÂô® -->
    <div id="jspsych-experiment" style="display: none;"></div>
    
    <!-- ‰ΩøÁî®?ïÊ?ËºâÂÖ•Á¢∫‰?Ê≠?¢∫?ÑË??•È?Â∫?-->
    <script>
        (function() {
            // ËºâÂÖ•?≥Êú¨?ÑÂáΩ??
            function loadScript(src, callback) {
                var script = document.createElement('script');
                script.src = src;
                script.async = false;
                script.onload = function() {
                    if (callback) callback();
                };
                script.onerror = function() {
                    console.error('ËºâÂÖ•Â§±Ê?: ' + src);
                    var loadingDiv = document.getElementById('loading');
                    if (loadingDiv) {
                        loadingDiv.innerHTML = '<p style="color: red;">?ØË™§ÔºöÁÑ°Ê≥ïË???' + src + '</p>';
                    }
                };
                document.head.appendChild(script);
            }
            
            // Á¢∫‰? jsPsych ?©‰ª∂?ØÁî®?ÑÂáΩ??
            function ensureJsPsychForPlugins() {
                // Â¶ÇÊ? jsPsych Â∑≤Á?Â≠òÂú®ÔºåÁõ¥?•Ë???
                if (typeof jsPsych !== 'undefined') {
                    return true;
                }
                
                // Â¶ÇÊ? initJsPsych Â≠òÂú®ÔºåÂâµÂª?jsPsych ÁµêÊ?‰æõÂ??õ‰Ωø??
                if (typeof initJsPsych !== 'undefined') {
                    window.jsPsych = window.jsPsych || {
                        ParameterType: {
                            HTML_STRING: 'html-string',
                            STRING: 'string',
                            INT: 'int',
                            FLOAT: 'float',
                            BOOL: 'bool',
                            FUNCTION: 'function',
                            KEY: 'key',
                            KEYS: 'keys',
                            SELECT: 'select',
                            TEXT: 'text',
                            COMPLEX: 'complex',
                            COLOR: 'color'
                        }
                    };
                    console.log('??jsPsych ÁµêÊ?Â∑≤ÂâµÂª∫‰?Â§ñÊ?‰ΩøÁî®');
                    return true;
                }
                
                return false;
            }
            
            // Ê≠•È? 1: ËºâÂÖ• jsPsych ?∏Â?
            loadScript('https://cdn.jsdelivr.net/npm/jspsych@7.3.3/dist/jspsych.js', function() {
                console.log('??jsPsych ?∏Â?Â∑≤Ë???);
                
                // Á¢∫‰? jsPsych ?©‰ª∂?ØÁî®ÔºàÂ??õÈ?Ë¶ÅÔ?
                ensureJsPsychForPlugins();
                
                // Á≠âÂ?‰∏Ä‰∏ãÁ¢∫‰ø?jsPsych ÁµêÊ?Â∑≤Ë®≠ÁΩ?
                setTimeout(function() {
                    // Ê≠•È? 2: ËºâÂÖ• html-keyboard-response Â§ñÊ?
                    loadScript('https://cdn.jsdelivr.net/npm/@jspsych/plugin-html-keyboard-response@1.1.1/dist/index.browser.js', function() {
                        console.log('??html-keyboard-response Â§ñÊ?Â∑≤Ë???);
                        
                        // Ê≠•È? 3: ËºâÂÖ• html-button-response Â§ñÊ?
                        loadScript('https://cdn.jsdelivr.net/npm/@jspsych/plugin-html-button-response@1.1.1/dist/index.browser.js', function() {
                            console.log('??html-button-response Â§ñÊ?Â∑≤Ë???);
                            
                            // Ê≠•È? 4: ËºâÂÖ•ÂØ¶È?Á®ãÂ?
                            loadScript('./script/experiment2.js', function() {
                                console.log('??ÂØ¶È?Á®ãÂ?Â∑≤Ë???);
                            });
                        });
                    });
                }, 200);
            });
        })();
    </script>
</body>
</html>
